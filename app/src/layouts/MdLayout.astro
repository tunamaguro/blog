---
import type { MDXLayoutProps, MarkdownLayoutProps } from "astro";
import type { CollectionEntry } from "astro:content";

type Props = MarkdownLayoutProps<CollectionEntry<"article">["data"]>;

import BaseLayout from "./BaseLayout.astro";
import { MdDetail } from "@/components/MdDetail";
import { getMarkdownExcerpt } from "@/server/getMarkdownExcerpt";

const { frontmatter, rawContent } = Astro.props;

// もしrawContentがなかったデフォルトのdescriptionを使用する
const description = getMarkdownExcerpt(rawContent?.() ?? "") || undefined;
---

<BaseLayout title={frontmatter.title} description={description}>
  <MdDetail
    title={frontmatter.title}
    emoji={frontmatter.emoji}
    createdAt={frontmatter.date}
    tags={frontmatter.tags}
  >
    <slot />
  </MdDetail>
</BaseLayout>
