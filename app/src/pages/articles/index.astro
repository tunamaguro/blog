---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { PostList } from "@/components/PostList";
import { PostListHeader } from "@/components/PostList/Header";
import { getArticles } from "@/utils/getArticles";
import PostSearch from "@/components/PostSearch/index.astro";
import { SearchBar } from "@/components/SearchDialog/SearchBar";
import { SearchDialog } from "@/components/SearchDialog/SearchDialog";

const articles = await getArticles();

const card_info = articles
  .map((article) => ({
    ...article.data,
    slug: article.slug,
  }))
  .sort((a, b) => (a.createdAt < b.createdAt ? 1 : -1));
---

<BaseLayout>
  <SearchBar client:load open_dialog_id="search_dialog" />
  <SearchDialog dialog_id="search_dialog">
    <PostSearch />
  </SearchDialog>
  <PostList cards={card_info}>
    <PostListHeader>Blog</PostListHeader>
  </PostList>
</BaseLayout>

<script></script>
